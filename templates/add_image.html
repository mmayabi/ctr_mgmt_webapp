{% extends "layout.html" %}

{% block title %}
    Add Image
{% endblock %}

{% block main %}
    <div class="tab">
        <button class="tablinks" onclick="opentab(event, 'pull')" id="defaultOpen">PULL</button>
        <button class="tablinks" onclick="opentab(event, 'build')">BUILD</button>
    </div>

    <div id="pull" class="tabcontent">
        <h3>Pull image</h3>
        <form action="/add_image" method="post">
            <div class="mb-3">
                <input autocomplete="off" autofocus class="form-control mx-auto w-auto" id="repository" name="repository" placeholder="Repository" type="text">
            </div>
            <div class="mb-3">
                <input class="form-control mx-auto w-auto" id="tag" name="tag" placeholder="Tag" type="text">
            </div>
            <button class="btn btn-primary" type="submit" name="action" value="pull">Pull Image</button>
        </form>
    </div>
    <div id="build" class="tabcontent">
        <h3>Build image</h3>
        <form action="/add_image" method="post">
            <div class="mb-3">
                <p><label for="dockerfile">Dockerfile:</label></p>
                <textarea id="dockerfile" name="dockerfile" rows="10" cols="50">
                </textarea>
            </div>
            <div class="mb-3">
                <input class="form-control mx-auto w-auto" id="tag" name="tag" placeholder="Tag" type="text">
            </div>
            <button class="btn btn-primary" type="submit" name="action" value="build">Build Image</button>
        </form>
    </div>

    <script>
        function opentab(evt, tabName) {
          var i, tabcontent, tablinks;
          tabcontent = document.getElementsByClassName("tabcontent");
          for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
          }
          tablinks = document.getElementsByClassName("tablinks");
          for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
          }
          document.getElementById(tabName).style.display = "block";
          evt.currentTarget.className += " active";
        }        
        // Get the element with id="defaultOpen" and click on it
        document.getElementById("defaultOpen").click();
    </script>

{% endblock %}